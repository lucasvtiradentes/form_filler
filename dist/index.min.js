!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).FormFillerAssistant=t()}(this,(function(){"use strict";const e={primary:{background:"#0074D9",text:"#fff"},secondary:{background:"#fff",hoverBackground:"#ccc",text:"#000000",border:"#ccc"},overlay:"rgba(0, 0, 0, 0.7)",boxShadown:"rgba(0, 0, 0, 0.1)"},t={iconImage:"https://www.svgrepo.com/show/532994/plus.svg",iconColorCss:"filter: invert(100%);",right:"30px",bottom:"30px"},o={floatingButton:"ffa_floating_container",optionsContainer:"ffa_options_container",modalContainer:"ffa_modal_container"},n={name:"FORM_FILLER_ASSISTANT",version:"1.6.0",buildTime:"14/10/2023 - 23:02:45",link:"https://github.com/lucasvtiradentes/form_filler_assistant",temperMonkeyLink:"https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo",initialScript:"https://github.com/lucasvtiradentes/form_filler_assistant/dist/initial_temper_monkey_script.js"},r={debug:!1,typeDelay:0};class s{colorScheme;runConfigs;constructor(t){this.colorScheme={...e,...t?.colorScheme?t?.colorScheme:{}},this.runConfigs={...r,...t?.runConfigs?t?.runConfigs:{}}}async delay(e,t){return t||this.logger(`waiting: ${e}`),new Promise((t=>setTimeout(t,e)))}getStorageItem(e){return sessionStorage.getItem(e)}setStorageItem(e,t){sessionStorage.setItem(e,t)}getElementByTagText(e,t,o){const n=Array.from(document.querySelectorAll(e)).filter((e=>e.innerText.search(t)>-1)),r=0===n.length?null:n[0];return r||this.logger(`not found element: [${e} | ${t} | 0]`,"error"),r}getElementByAttributeValue(e,t,o,n){const r=Array.from(document.querySelectorAll(e)).filter((e=>e.getAttribute(t)===o)),s=0===r.length?null:r[0];return s||this.logger(`not found element: [${e} | ${t} | ${o} | 0]`,"error"),s}getElementBySelector(e){const t=document.querySelector(e);return t||this.logger(`not found element by selector: [${e}]`,"error"),t}async typeOnInput(e,t){this.logger(`typing: ${t}`);for(const o of t){const t=new Event("input",{bubbles:!0}),n=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value");if(n){const r=n.set;r&&r.call(e,e.value+o),e.dispatchEvent(t);const s=new KeyboardEvent("keydown",{key:o,code:`Key${o.toUpperCase()}`,bubbles:!0,cancelable:!0});await this.delay(this.runConfigs.typeDelay,!0),e.dispatchEvent(s)}}}async typeOnInputByElement(e,t){e?(this.logger(`type on element [${e}]`),await this.typeOnInput(e,t)):this.logger(`not found element to type : ${t}`,"error")}async typeOnInputBySelector(e,t){const o=document.querySelector(e);o&&(this.logger(`type on element by selector [${e}]`),await this.typeOnInput(o,t))}click(e){e&&e.click()}clickElement(e){e&&(this.logger(`clicked element: [${e}]`),this.click(e))}clickBySelector(e){const t=this.getElementBySelector(e);t&&(this.logger(`clicked element by selector: [${e}]`),this.click(t))}clickTagByText(e,t,o){const n=this.getElementByTagText(e,t,0);n&&(this.logger(`clicked element by tag text: [${e} | ${t} | 0]`),n.click())}clickTagByAttributeValue(e,t,o,n){const r=this.getElementByAttributeValue(e,t,o,0);r&&(this.logger(`clicked element by attribute value: [${e} | ${t} | ${o} | 0]`),r.click())}generateFormRow(e,t,o){const n=`navigator.clipboard.writeText('${t}');${o?`(${o})()`:""}`;return`\n      <div style="display: grid; grid-template-columns: 1fr 2fr;">\n        <div style="flex: 1; padding: 3px 10px; font-weight: 600;">${e}</div>\n        <div style="flex: 1; padding: 3px 10px; background-color: ${this.colorScheme.secondary.background}; this.style.color = '${this.colorScheme.secondary.text}'; cursor: pointer;"\n          onmouseover="this.style.backgroundColor = '${this.colorScheme.primary.background}'; this.style.color = '${this.colorScheme.primary.text}'; this.style.cursor = 'pointer';"\n          onmouseout="this.style.backgroundColor = '${this.colorScheme.secondary.background}'; this.style.color = '${this.colorScheme.secondary.text}'; this.style.cursor = 'default';"\n          onclick="${n}"\n        >${t}</div>\n      </div>`}getModal(e){const t=document.createElement("div");t.setAttribute("class",o.modalContainer),t.setAttribute("style",`display: flex; align-items: center; justify-content: center; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: ${this.colorScheme.overlay}; z-index: 1000;`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${this.colorScheme.secondary.background}; color: ${this.colorScheme.secondary.text}; border-radius: 5px; padding: 10px; box-shadow: 0px 4px 6px ${this.colorScheme.boxShadown}; max-width: 80%;`),t.appendChild(n);const r=document.createElement("div");n.appendChild(r);const s=document.createElement("h2");s.textContent=e,s.setAttribute("style","padding: 10px; margin: 0; font-weight: bold; text-align: center;"),r.appendChild(s),document.body.appendChild(t);const i=e=>{"Escape"!==e.key&&"Esc"!==e.key&&"'"!==e.key||(this.logger("detected Escape press, closing modal"),c())},c=()=>{document.querySelector(`.${o.modalContainer}`)&&(document.body.removeChild(t),document.removeEventListener("keydown",i))};return t.addEventListener("click",(e=>{e.target===t&&c()})),document.addEventListener("keydown",i),{updateModalContent:(e,t)=>{const o=document.createElement("div");o.innerHTML=e,r.innerHTML=s.outerHTML+o.outerHTML,t&&t.length>0&&t.forEach((e=>{const t=document.createElement("button");t.textContent=e.title,t.setAttribute("style",`display: block; width: 100%; margin-top: 10px; text-align: center; padding: 10px; border: none; background-color: ${this.colorScheme.primary.background}; color: ${this.colorScheme.primary.text}; border-radius: 5px; cursor: pointer;`),t.addEventListener("click",(()=>{e.action(),!1!==e.exitAfterAction&&c()})),r.appendChild(t)}))},closeModal:c}}logger(e,t="info"){this.runConfigs.debug&&("error"===t&&console.error(e),"info"===t&&console.log(e))}}class i{name="";constructor(){this.name=this.generatePersonName()}generateCNPJ(){const e=(()=>{const e=[];for(let t=0;t<12;t++)e.push(Math.floor(10*Math.random()));return e})(),t=(e=>{const t=[5,4,3,2,9,8,7,6,5,4,3,2];let o=0;for(let n=0;n<12;n++)o+=e[n]*t[n];const n=o%11;return n<2?0:11-n})(e),o=((e,t)=>{const o=[6,5,4,3,2,9,8,7,6,5,4,3,2];let n=0;for(let t=0;t<12;t++)n+=e[t]*o[t];n+=t*o[12];const r=n%11;return r<2?0:11-r})(e.concat(t),t);return`${e.join("")}${t}${o}`}generateCPF(){const e=[];for(let t=0;t<11;t++){const t=(9*Math.random()).toFixed(0);e.push(t)}const t=e.join("");let o=10,n=11,r=0,s=0,i=0,c=0;for(let e=0;e<11;e++){for(const n of t[e]){const e=Number(n)*o;o--,r+=e}for(const o of t[e]){const e=Number(o)*n;n--,s+=e}i=11-(r-Number(t[9]))%11,c=11-(s-Number(t[10]))%11}return i>9&&(i=0),c>9&&(c=0),i===Number(t[9])&&c===Number(t[10])&&t.charAt(0).repeat(11)!==t?t:this.generateCPF()}generateNRandomNumbers(e){return Math.floor(Math.random()*Math.pow(10,e)).toString().padStart(e,"0")}generateCompanyName(){const e=["Tecnologia","Global","Inovador","Digital","Criativo","Avançado","Ecológico","Futuro","Dinâmico","Estratégico","Inovação","Sustentável","Inteligente","Modernidade","Progresso","Transformação","Qualidade","Comunicação","Conectado","Energia"],t=["Soluções","Sistemas","Empresas","Grupo","Serviços","Corp","Indústrias","Tecnologias","Inovações","Ventures","Parcerias","Produtos","Consultoria","Desenvolvimento","Logística","Comércio","Marketing","Pesquisa","Engenharia","Educação"];return`${e[Math.floor(Math.random()*e.length)]} ${t[Math.floor(Math.random()*t.length)]} ${Math.floor(1e3*Math.random())}`}generatePersonName(){const e=["Miguel","Sofia","Davi","Alice","Arthur","Julia","Pedro","Manuela","Gabriel","Laura","Bernardo","Luiza","Lucas","Valentina","Matheus","Giovanna","Rafael","Beatriz","Enzo","Maria Eduarda"],t=["Silva","Santos","Oliveira","Pereira","Almeida","Fernandes","Ribeiro","Costa","Carvalho","Martins","Rodrigues","Nascimento","Lima","Araújo","Monteiro","Gomes","Barbosa","Cardoso","Correia","Dias"],o=`${e[Math.floor(Math.random()*e.length)]} ${t[Math.floor(Math.random()*t.length)]}`;return this.name=o,o}generatePersonEmail(){const e=Math.floor(900*Math.random())+100;return`${this.name.replace(/\s/g,".").toLowerCase()}${e}@example.com`}generatePersonUsername(){return`${this.name.split(" ").map((e=>e.charAt(0))).join("").toLowerCase()}${Math.floor(9e3*Math.random())+1e3}`}}class c{colorScheme;buttonConfigs;runConfigs;constructor(o){this.colorScheme={...e,...o?.colorScheme?o?.colorScheme:{}},this.buttonConfigs={...t,...o?.buttonConfigs?o?.buttonConfigs:{}},this.runConfigs={...r,...o?.runConfigs?o?.runConfigs:{}}}atach(e,t){const n=this.getOptionsEl(e,t);this.atachFloatingToHTML(n),document.addEventListener("click",(e=>{const t=document.querySelector(`.${o.floatingButton}`),n=document.querySelector(`.${o.optionsContainer}`);"block"!==n.style.display||t.contains(e.target)||(n.style.display="none")}))}logger(e,t="info"){this.runConfigs.debug&&("error"===t&&console.error(e),"info"===t&&console.log(e))}getOptionsEl(e,t){const r=document.createElement("div");r.setAttribute("style",`display: none; position: absolute; bottom: 70px; right: 0; color: ${this.colorScheme.secondary.text}; background-color: ${this.colorScheme.secondary.background}; border-radius: 5px; border: 1px solid ${this.colorScheme.secondary.border}; box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); white-space: nowrap;`),r.setAttribute("class",o.optionsContainer);const s=document.createElement("div");s.setAttribute("style","width: 100%; display: grid; grid-template-columns: 1fr 1fr; padding: 3px");const i=document.createElement("div");i.textContent=`V${n.version}`,i.setAttribute("style",`display: flex; align-items: center; justify-content: center; font-size: 14px; color: ${this.colorScheme.primary.background}`),s.appendChild(i);const c=document.createElement("div");c.setAttribute("style","display: flex; align-items: center; justify-content: center; gap: 10px;");const l=document.createElement("img");if(l.src="https://www.svgrepo.com/show/512317/github-142.svg",l.setAttribute("style","width: 18px; height: 18px; cursor: pointer;"),l.addEventListener("click",(()=>{r.style.display="none",window.open(n.link,"_blank")})),c.appendChild(l),t){const e=document.createElement("img");e.src="https://www.svgrepo.com/show/460136/update-alt.svg",e.setAttribute("style","width: 20px; height: 20px; cursor: pointer;"),e.addEventListener("click",(()=>{r.style.display="none",t()})),c.appendChild(e)}s.appendChild(c),r.appendChild(s);const a=document.createElement("div");return a.setAttribute("style","border-top: 1px solid #ccc; margin-top: 5px; margin-bottom: 5px;"),r.appendChild(a),e.forEach(((e,t)=>{const o=document.createElement("button");o.textContent=`${t+1} - ${e.name}`,o.setAttribute("data",`key_${t+1}`),o.setAttribute("style","display: block; width: 100%; padding: 10px; border: none; background-color: transparent; text-align: left;"),o.setAttribute("onmouseover",`this.style.backgroundColor = '${this.colorScheme.primary.background}'; this.style.color = '${this.colorScheme.primary.text}'; this.style.cursor = 'pointer';`),o.setAttribute("onmouseout",`this.style.backgroundColor = '${this.colorScheme.secondary.background}'; this.style.color = '${this.colorScheme.secondary.text}'; this.style.cursor = 'default';`),o.addEventListener("click",(()=>{r.style.display="none",document.removeEventListener("keydown",this.detectNumbersPress),e.action()})),r.appendChild(o)})),r}atachFloatingToHTML(e){const t=document.createElement("div");t.setAttribute("style",`position: fixed; bottom: ${this.buttonConfigs.bottom}; right: ${this.buttonConfigs.right}; z-index: 9999;`),t.setAttribute("class",o.floatingButton);const n=document.createElement("button");n.setAttribute("style",`border-radius: 50%; width: 50px; height: 50px; background-color: ${this.colorScheme.primary.background}; color: ${this.colorScheme.primary.text}; border: none; cursor: pointer; box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); display: flex; align-items: center; justify-content: center;`);const r=document.createElement("img");r.src=this.buttonConfigs.iconImage,r.setAttribute("style",`width: 24px; height: 24px; ${this.buttonConfigs.iconColorCss}`),n.appendChild(r),t.appendChild(n),t.appendChild(e),document.body.appendChild(t);const s=()=>{"none"===e.style.display||""===e.style.display?(e.style.display="block",document.addEventListener("keydown",(e=>this.detectNumbersPress(e))),this.logger("show floating button")):(e.style.display="none",document.removeEventListener("keydown",(e=>this.detectNumbersPress(e))),this.logger("hide floating button"))};n.addEventListener("click",s),document.addEventListener("keydown",(e=>{(e.ctrlKey&&"Space"===e.code||e.altKey&&"Space"===e.code)&&(this.logger("detected ctrl+space or alt+space, toggling floating button"),s())}))}detectNumbersPress(e){const t=document.querySelector(`.${o.optionsContainer}`);if(!t||"block"!==t.style.display)return;if(!["1","2","3","4","5","6","7","8","9","0"].includes(e.key))return;const n=document.querySelector(`[data="key_${e.key}"]`);n&&(this.logger(`detected ${e.key} keypress, exec corresponding action`),n.click())}}function l(e){const t=function(e){const t=Object.getPrototypeOf(e);return Object.getOwnPropertyNames(t).map((e=>{const o=Reflect.get(t,e);return{name:e,parameters:(o.toString().match(/\(([^)]*)\)/)?.[1].split(",").map((e=>e.trim())).filter(Boolean)||[]).join(", ")}})).filter((e=>!1===["constructor","logger"].includes(e.name)))}(e);var o;return o="name",t.reduce(((e,t)=>{const{[o]:n,...r}=t;return e[t[o]]=r,e}),{})}const a=()=>{console.log("# METHODS =======================================================\n"),console.log("\nOther methods\n"),console.table({"formFiller.atach":{parameters:"optionsArr"},"formFiller.help":{parameters:""}}),console.log("\nformFiller.dataUtils\n"),console.table(l(new i)),console.log("\nformFiller.browserUtils\n"),console.table(l(new s)),console.log("\n# PACKAGE INFO ==================================================\n\n"),console.log(`name        : ${n.name}`),console.log(`version     : ${n.version}`),console.log(`build_time  : ${n.buildTime}`),console.log(`package link: ${n.link}`)};return class{colorScheme;buttonConfigs;runConfigs;constructor(o){this.colorScheme={...e,...o?.colorScheme?o?.colorScheme:{}},this.buttonConfigs={...t,...o?.buttonConfigs?o?.buttonConfigs:{}},this.runConfigs={...r,...o?.runConfigs?o?.runConfigs:{}}}VERSION=n.version;BUILD_DATETIME=n.buildTime;help=a;atach(e,t){new c({colorScheme:this.colorScheme,runConfigs:this.runConfigs,buttonConfigs:this.buttonConfigs}).atach(e,t)}browserUtils(){return new s({colorScheme:this.colorScheme,runConfigs:this.runConfigs})}dataUtils(){return new i}}}));
